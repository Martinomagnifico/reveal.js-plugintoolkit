(function(l,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("deepmerge")):typeof define=="function"&&define.amd?define(["exports","deepmerge"],a):(l=typeof globalThis<"u"?globalThis:l||self,a(l.RevealPluginToolkit={},l.deepmerge))})(this,function(l,a){"use strict";var V=Object.defineProperty;var z=(l,a,s)=>a in l?V(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s;var c=(l,a,s)=>z(l,typeof a!="symbol"?a+"":a,s);var s=typeof document<"u"?document.currentScript:null;const _=()=>{const n=typeof window<"u",e=typeof document<"u",t=n&&typeof location<"u"&&/localhost|127\.0\.0\.1/.test(location.hostname);let i=!1;try{i=new Function('return typeof module !== "undefined" && !!module.hot')()}catch{}let o=!1;try{o=new Function('return typeof import.meta !== "undefined" && typeof import.meta.env !== "undefined" && import.meta.env.DEV === true')()}catch{}const r=n&&typeof navigator<"u"&&/vite|localhost|127\.0\.0\.1/.test(location.origin)&&/AppleWebKit|Chrome|Vite/.test(navigator.userAgent),u=e&&!!document.querySelector('script[type="module"]');let f=!1;try{f=new Function('return typeof process !== "undefined" && process.env && (process.env.ROLLUP_WATCH === "true" || process.env.NODE_ENV === "development")')()}catch{}let d=!1;try{d=new Function('return typeof define === "function" && !!define.amd')()}catch{}return{isDevServer:t,isWebpackHMR:i,isVite:o,isVitePreview:r,hasModuleScripts:u,isModuleBundler:f,isAMD:d,isBundlerEnvironment:i||o||r||u||f||d||t}};class P{constructor(e,t,i){c(this,"defaultConfig");c(this,"pluginInit");c(this,"pluginId");c(this,"mergedConfig",null);c(this,"userConfigData",null);c(this,"data",{});c(this,"getEnvironmentInfo",()=>_());typeof e=="string"?(this.pluginId=e,this.pluginInit=t,this.defaultConfig=i||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{})}initializeConfig(e){const t=this.defaultConfig,o=e.getConfig()[this.pluginId]||{};this.userConfigData=o,this.mergedConfig=a(t,o,{arrayMerge:(r,u)=>u,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}get userConfig(){return this.userConfigData||{}}init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:i=>this.init(i),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const A=n=>{const e=document.querySelector(`script[src$="${n}.js"], script[src$="${n}.min.js"], script[src$="${n}.mjs"]`);if(e!=null&&e.src){const t=e.getAttribute("src")||"",i=t.lastIndexOf("/");if(i!==-1)return t.substring(0,i+1)}try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:s&&s.tagName.toUpperCase()==="SCRIPT"&&s.src||new URL("plugintoolkit.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:s&&s.tagName.toUpperCase()==="SCRIPT"&&s.src||new URL("plugintoolkit.js",document.baseURI).href))return(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:s&&s.tagName.toUpperCase()==="SCRIPT"&&s.src||new URL("plugintoolkit.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:s&&s.tagName.toUpperCase()==="SCRIPT"&&s.src||new URL("plugintoolkit.js",document.baseURI).href).lastIndexOf("/")+1)}catch{}return`plugin/${n}/`},S="data-css-id",R=(n,e)=>new Promise((t,i)=>{const o=document.createElement("link");o.rel="stylesheet",o.href=e,o.setAttribute(S,n);const r=setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o),i(new Error(`[${n}] Timeout loading CSS from: ${e}`))},5e3);o.onload=()=>{clearTimeout(r),t()},o.onerror=()=>{clearTimeout(r),o.parentNode&&o.parentNode.removeChild(o),i(new Error(`[${n}] Failed to load CSS from: ${e}`))},document.head.appendChild(o)}),C=n=>document.querySelectorAll(`[${S}="${n}"]`).length>0,v=n=>new Promise(e=>{if(t())return e(!0);setTimeout(()=>{e(t())},50);function t(){if(C(n))return!0;try{return window.getComputedStyle(document.documentElement).getPropertyValue(`--cssimported-${n}`).trim()!==""}catch{return!1}}}),$=async n=>{const{id:e,cssautoload:t=!0,csspath:i="",debug:o=!1}=n;if(t===!1||i===!1)return;if(C(e)){o&&console.log(`[${e}] CSS already loaded, skipping`);return}const r=[];typeof i=="string"&&i.trim()!==""&&r.push(i);const u=A(e);if(u){const d=`${u}${e}.css`;r.push(d)}const f=`plugin/${e}/${e}.css`;r.push(f);for(const d of r)try{await R(e,d);let p="CSS";i&&d===i?p="user-specified CSS":u&&d===`${u}${e}.css`?p="CSS (auto-detected from script location)":p="CSS (standard fallback)",o&&console.log(`[${e}] ${p} loaded successfully from: ${d}`);return}catch{o&&console.log(`[${e}] Failed to load CSS from: ${d}`)}console.warn(`[${e}] Could not load CSS from any location`)};async function D(n,e){if("getEnvironmentInfo"in n&&e){const t=n,i=t.getEnvironmentInfo();if(await v(t.pluginId)){e.debug&&console.log(`[${t.pluginId}] CSS already imported, skipping`);return}if("cssautoload"in t.userConfig?!!e.cssautoload:!i.isBundlerEnvironment)return $({id:t.pluginId,cssautoload:!0,csspath:e.csspath,debug:e.debug});i.isBundlerEnvironment&&console.warn(`[${t.pluginId}] CSS autoloading is disabled in bundler environments. Please import the CSS manually, using import.`);return}return $(n)}class U{constructor(){c(this,"debugMode",!1);c(this,"label","DEBUG");c(this,"groupDepth",0);c(this,"group",(...e)=>{this.debugLog("group",...e),this.groupDepth++});c(this,"groupCollapsed",(...e)=>{this.debugLog("groupCollapsed",...e),this.groupDepth++});c(this,"groupEnd",()=>{this.groupDepth>0&&(this.groupDepth--,this.debugLog("groupEnd"))});c(this,"error",(...e)=>{const t=this.debugMode;this.debugMode=!0,this.formatAndLog(console.error,e),this.debugMode=t});c(this,"table",(e,t,i)=>{if(this.debugMode)try{typeof e=="string"&&t!==void 0&&typeof t!="string"?(this.groupDepth===0?console.log(`[${this.label}]: ${e}`):console.log(e),i?console.table(t,i):console.table(t)):(this.groupDepth===0&&console.log(`[${this.label}]: Table data`),typeof t=="object"&&Array.isArray(t)?console.table(e,t):console.table(e))}catch(o){console.error(`[${this.label}]: Error showing table:`,o),console.log(`[${this.label}]: Raw data:`,e)}});c(this,"formatAndLog",(e,t)=>{if(this.debugMode)try{this.groupDepth>0?e.call(console,...t):t.length>0&&typeof t[0]=="string"?e.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):e.call(console,`[${this.label}]:`,...t)}catch(i){console.error(`[${this.label}]: Error in logging:`,i),console.log(`[${this.label}]: Original log data:`,...t)}})}initialize(e,t="DEBUG"){this.debugMode=e,this.label=t}debugLog(e,...t){const i=console[e];if(!this.debugMode&&e!=="error"||typeof i!="function")return;const o=i;if(e==="group"||e==="groupCollapsed"){t.length>0&&typeof t[0]=="string"?o.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):o.call(console,`[${this.label}]:`,...t);return}if(e==="groupEnd"){o.call(console);return}if(e==="table"){t.length===1?this.table(t[0]):t.length===2?typeof t[0]=="string"?this.table(t[0],t[1]):this.table(t[0],t[1]):t.length>=3&&this.table(t[0],t[1],t[2]);return}this.groupDepth>0?o.call(console,...t):t.length>0&&typeof t[0]=="string"?o.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):o.call(console,`[${this.label}]:`,...t)}}const j=(n=>new Proxy(n,{get:(e,t)=>{if(t in e)return e[t];const i=t.toString();if(typeof console[i]=="function")return(...o)=>{e.debugLog(i,...o)}}}))(new U),b=n=>{let[e,t]=[0,0];n.on("slidechanged",i=>{const{indexh:o,indexv:r,previousSlide:u,currentSlide:f}=i;o!==e&&n.dispatchEvent({type:"slidechanged-h",data:{previousSlide:u,currentSlide:f,indexh:o,indexv:r}}),r!==t&&o===e&&n.dispatchEvent({type:"slidechanged-v",data:{previousSlide:u,currentSlide:f,indexh:o,indexv:r}}),[e,t]=[o,r]})},E=b,T=n=>{const e=n.getViewportElement();if(!e)return console.warn("[verticator]: Could not find viewport element"),()=>{};const t=()=>e.classList.contains("reveal-scroll");let i=t(),o=!0;const r=new MutationObserver(()=>{if(!o)return;const u=t();if(u!==i){const f=n.getCurrentSlide(),d=n.getIndices(),p=d.h,y=d.v,F=u?"scrollmode-enter":"scrollmode-exit";n.dispatchEvent({type:F,data:{currentSlide:f,previousSlide:null,indexh:p,indexv:y}}),i=u}});return r.observe(e,{attributes:!0,attributeFilter:["class"]}),()=>{o=!1,r.disconnect()}},k=Object.freeze(Object.defineProperty({__proto__:null,addDirectionEvents:b,addMoreDirectionEvents:E,addScrollModeEvents:T},Symbol.toStringTag,{value:"Module"}));var I=(n=>(n.HORIZONTAL="horizontal",n.STACK="stack",n.VERTICAL="vertical",n.INVALID="invalid",n))(I||{});const g=n=>n instanceof HTMLElement&&n.tagName==="SECTION",h=n=>g(n)?Array.from(n.children).some(e=>e instanceof HTMLElement&&e.tagName==="SECTION"):!1,m=n=>g(n)?n.parentElement instanceof HTMLElement&&n.parentElement.tagName==="SECTION":!1,w=n=>g(n)&&!m(n)&&!h(n),L=n=>{if(!g(n))return null;if(m(n)){const e=n.parentElement;if(e instanceof HTMLElement&&h(e))return e}return null},M=n=>g(n)?m(n)?"vertical":h(n)?"stack":"horizontal":"invalid",x=Object.freeze(Object.defineProperty({__proto__:null,SectionType:I,getSectionType:M,getStack:L,isHorizontal:w,isSection:g,isStack:h,isVertical:m},Symbol.toStringTag,{value:"Module"})),N=Object.freeze(Object.defineProperty({__proto__:null,addDirectionEvents:b,addMoreDirectionEvents:E,addScrollModeEvents:T,getSectionType:M,getStack:L,isHorizontal:w,isSection:g,isStack:h,isVertical:m},Symbol.toStringTag,{value:"Module"}));l.PluginBase=P,l.eventTools=k,l.isCssImported=v,l.pluginCSS=D,l.pluginDebug=j,l.pluginTools=N,l.sectionTools=x,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
