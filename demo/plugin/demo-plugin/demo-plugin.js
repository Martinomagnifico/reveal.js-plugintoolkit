(function(d,S){typeof exports=="object"&&typeof module<"u"?module.exports=S():typeof define=="function"&&define.amd?define(S):(d=typeof globalThis<"u"?globalThis:d||self,d.RevealDemoPlugin=S())})(this,(function(){"use strict";var d=typeof document<"u"?document.currentScript:null;function S(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var v,M;function j(){if(M)return v;M=1;var o=function(l){return e(l)&&!t(l)};function e(r){return!!r&&typeof r=="object"}function t(r){var l=Object.prototype.toString.call(r);return l==="[object RegExp]"||l==="[object Date]"||c(r)}var n=typeof Symbol=="function"&&Symbol.for,i=n?Symbol.for("react.element"):60103;function c(r){return r.$$typeof===i}function u(r){return Array.isArray(r)?[]:{}}function a(r,l){return l.clone!==!1&&l.isMergeableObject(r)?b(u(r),r,l):r}function f(r,l,s){return r.concat(l).map(function(g){return a(g,s)})}function m(r,l){if(!l.customMerge)return b;var s=l.customMerge(r);return typeof s=="function"?s:b}function y(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(l){return Object.propertyIsEnumerable.call(r,l)}):[]}function C(r){return Object.keys(r).concat(y(r))}function A(r,l){try{return l in r}catch{return!1}}function W(r,l){return A(r,l)&&!(Object.hasOwnProperty.call(r,l)&&Object.propertyIsEnumerable.call(r,l))}function G(r,l,s){var g={};return s.isMergeableObject(r)&&C(r).forEach(function(p){g[p]=a(r[p],s)}),C(l).forEach(function(p){W(r,p)||(A(r,p)&&s.isMergeableObject(l[p])?g[p]=m(p,s)(r[p],l[p],s):g[p]=a(l[p],s))}),g}function b(r,l,s){s=s||{},s.arrayMerge=s.arrayMerge||f,s.isMergeableObject=s.isMergeableObject||o,s.cloneUnlessOtherwiseSpecified=a;var g=Array.isArray(l),p=Array.isArray(r),Y=g===p;return Y?g?s.arrayMerge(r,l,s):G(r,l,s):a(l,s)}b.all=function(l,s){if(!Array.isArray(l))throw new Error("first argument should be an array");return l.reduce(function(g,p){return b(g,p,s)},{})};var K=b;return v=K,v}var L=j();const P=S(L),D=()=>{const o=typeof window<"u",e=typeof document<"u",t=o&&typeof location<"u"&&/localhost|127\.0\.0\.1/.test(location.hostname);let n=!1;try{n=new Function('return typeof module !== "undefined" && !!module.hot')()}catch{}let i=!1;try{i=new Function('return typeof import.meta !== "undefined" && typeof import.meta.env !== "undefined" && import.meta.env.DEV === true')()}catch{}const c=o&&typeof navigator<"u"&&/vite|localhost|127\.0\.0\.1/.test(location.origin)&&/AppleWebKit|Chrome|Vite/.test(navigator.userAgent),u=e&&!!document.querySelector('script[type="module"]');let a=!1;try{a=new Function('return typeof process !== "undefined" && process.env && (process.env.ROLLUP_WATCH === "true" || process.env.NODE_ENV === "development")')()}catch{}let f=!1;try{f=new Function('return typeof define === "function" && !!define.amd')()}catch{}return{isDevServer:t,isWebpackHMR:n,isVite:i,isVitePreview:c,hasModuleScripts:u,isModuleBundler:a,isAMD:f,isBundlerEnvironment:n||i||c||u||a||f||t}};class R{defaultConfig;pluginInit;pluginId;mergedConfig=null;userConfigData=null;data={};constructor(e,t,n){typeof e=="string"?(this.pluginId=e,this.pluginInit=t,this.defaultConfig=n||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{})}initializeConfig(e){const t=this.defaultConfig,i=e.getConfig()[this.pluginId]||{};this.userConfigData=i,this.mergedConfig=P(t,i,{arrayMerge:(c,u)=>u,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}get userConfig(){return this.userConfigData||{}}getEnvironmentInfo=()=>D();init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:n=>this.init(n),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const x=o=>{const e=document.querySelector(`script[src$="${o}.js"], script[src$="${o}.min.js"], script[src$="${o}.mjs"]`);if(e?.src){const t=e.getAttribute("src")||"",n=t.lastIndexOf("/");if(n!==-1)return t.substring(0,n+1)}try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href))return(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:d&&d.tagName.toUpperCase()==="SCRIPT"&&d.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href).lastIndexOf("/")+1)}catch{}return`plugin/${o}/`},I="data-css-id",U=(o,e)=>new Promise((t,n)=>{const i=document.createElement("link");i.rel="stylesheet",i.href=e,i.setAttribute(I,o);const c=setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i),n(new Error(`[${o}] Timeout loading CSS from: ${e}`))},5e3);i.onload=()=>{clearTimeout(c),t()},i.onerror=()=>{clearTimeout(c),i.parentNode&&i.parentNode.removeChild(i),n(new Error(`[${o}] Failed to load CSS from: ${e}`))},document.head.appendChild(i)}),E=o=>document.querySelectorAll(`[${I}="${o}"]`).length>0,_=o=>new Promise(e=>{if(t())return e(!0);setTimeout(()=>{e(t())},50);function t(){if(E(o))return!0;try{return window.getComputedStyle(document.documentElement).getPropertyValue(`--cssimported-${o}`).trim()!==""}catch{return!1}}}),T=async o=>{const{id:e,cssautoload:t=!0,csspath:n="",debug:i=!1}=o;if(t===!1||n===!1)return;if(E(e)&&!(typeof n=="string"&&n.trim()!=="")){i&&console.log(`[${e}] CSS is already loaded, skipping`);return}E(e)&&typeof n=="string"&&n.trim()!==""&&i&&console.log(`[${e}] CSS is already loaded, also loading user-specified path: ${n}`);const c=[];typeof n=="string"&&n.trim()!==""&&c.push(n);const u=x(e);if(u){const f=`${u}${e}.css`;c.push(f)}const a=`plugin/${e}/${e}.css`;c.push(a);for(const f of c)try{await U(e,f);let m="CSS";n&&f===n?m="user-specified CSS":u&&f===`${u}${e}.css`?m="CSS (auto-detected from script location)":m="CSS (standard fallback)",i&&console.log(`[${e}] ${m} loaded successfully from: ${f}`);return}catch{i&&console.log(`[${e}] Failed to load CSS from: ${f}`)}console.warn(`[${e}] Could not load CSS from any location`)};async function O(o,e){if("getEnvironmentInfo"in o&&e){const t=o,n=t.getEnvironmentInfo();if(await _(t.pluginId)&&!(typeof e.csspath=="string"&&e.csspath.trim()!=="")){e.debug&&console.log(`[${t.pluginId}] CSS is already imported, skipping`);return}if("cssautoload"in t.userConfig?!!e.cssautoload:!n.isBundlerEnvironment)return T({id:t.pluginId,cssautoload:!0,csspath:e.csspath,debug:e.debug});n.isBundlerEnvironment&&console.warn(`[${t.pluginId}] CSS autoloading is disabled in bundler environments. Please import the CSS manually, using import.`);return}return T(o)}class N{debugMode=!1;label="DEBUG";groupDepth=0;initialize(e,t="DEBUG"){this.debugMode=e,this.label=t}group=(...e)=>{this.debugLog("group",...e),this.groupDepth++};groupCollapsed=(...e)=>{this.debugLog("groupCollapsed",...e),this.groupDepth++};groupEnd=()=>{this.groupDepth>0&&(this.groupDepth--,this.debugLog("groupEnd"))};error=(...e)=>{const t=this.debugMode;this.debugMode=!0,this.formatAndLog(console.error,e),this.debugMode=t};table=(e,t,n)=>{if(this.debugMode)try{typeof e=="string"&&t!==void 0&&typeof t!="string"?(this.groupDepth===0?console.log(`[${this.label}]: ${e}`):console.log(e),n?console.table(t,n):console.table(t)):(this.groupDepth===0&&console.log(`[${this.label}]: Table data`),typeof t=="object"&&Array.isArray(t)?console.table(e,t):console.table(e))}catch(i){console.error(`[${this.label}]: Error showing table:`,i),console.log(`[${this.label}]: Raw data:`,e)}};formatAndLog=(e,t)=>{if(this.debugMode)try{this.groupDepth>0?e.call(console,...t):t.length>0&&typeof t[0]=="string"?e.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):e.call(console,`[${this.label}]:`,...t)}catch(n){console.error(`[${this.label}]: Error in logging:`,n),console.log(`[${this.label}]: Original log data:`,...t)}};debugLog(e,...t){const n=console[e];if(!this.debugMode&&e!=="error"||typeof n!="function")return;const i=n;if(e==="group"||e==="groupCollapsed"){t.length>0&&typeof t[0]=="string"?i.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):i.call(console,`[${this.label}]:`,...t);return}if(e==="groupEnd"){i.call(console);return}if(e==="table"){t.length===1?this.table(t[0]):t.length===2?typeof t[0]=="string"?this.table(t[0],t[1]):this.table(t[0],t[1]):t.length>=3&&this.table(t[0],t[1],t[2]);return}this.groupDepth>0?i.call(console,...t):t.length>0&&typeof t[0]=="string"?i.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):i.call(console,`[${this.label}]:`,...t)}}const h=(o=>new Proxy(o,{get:(e,t)=>{if(t in e)return e[t];const n=t.toString();if(typeof console[n]=="function")return(...i)=>{e.debugLog(n,...i)}}}))(new N),F=o=>{let[e,t]=[0,0];o.on("slidechanged",n=>{const{indexh:i,indexv:c,previousSlide:u,currentSlide:a}=n;i!==e&&o.dispatchEvent({type:"slidechanged-h",data:{previousSlide:u,currentSlide:a,indexh:i,indexv:c}}),c!==t&&i===e&&o.dispatchEvent({type:"slidechanged-v",data:{previousSlide:u,currentSlide:a,indexh:i,indexv:c}}),[e,t]=[i,c]})},z=o=>{const e=o.getViewportElement();if(!e)return console.warn("[verticator]: Could not find viewport element"),()=>{};const t=()=>e.classList.contains("reveal-scroll");let n=t(),i=!0;const c=new MutationObserver(()=>{if(!i)return;const u=t();if(u!==n){const a=o.getCurrentSlide(),f=o.getIndices(),m=f.h,y=f.v,C=u?"scrollmode-enter":"scrollmode-exit";o.dispatchEvent({type:C,data:{currentSlide:a,previousSlide:null,indexh:m,indexv:y}}),n=u}});return c.observe(e,{attributes:!0,attributeFilter:["class"]}),()=>{i=!1,c.disconnect()}},$=o=>o instanceof HTMLElement&&o.tagName==="SECTION",V=o=>$(o)?Array.from(o.children).some(e=>e instanceof HTMLElement&&e.tagName==="SECTION"):!1,q=o=>$(o)?o.parentElement instanceof HTMLElement&&o.parentElement.tagName==="SECTION":!1,B=o=>$(o)?q(o)?"vertical":V(o)?"stack":"horizontal":"invalid",k={demoOption:"default value",cssautoload:!0,csspath:"",debug:!1};class w{deck;options;currentSlide=null;constructor(e,t){this.deck=e,this.options=t,h.log("Demo plugin initialized with options:",t)}initialize(){h.log("Demo plugin initialized successfully");const e=document.createElement("div");e.className="demo-plugin-indicator",e.textContent="Demo Plugin Active",document.body.appendChild(e),h.log("Indicator element added"),F(this.deck),z(this.deck),this.deck.on("slidechanged-h",t=>{const n=t;if(n.currentSlide!==this.currentSlide){h.log("Moved horizontally",n);const i=B(n.currentSlide);h.log("Slide type:",i),this.currentSlide=n.currentSlide}}),this.deck.on("slidechanged-v",t=>{const n=t;n.currentSlide!==this.currentSlide&&(h.log("Moved vertically",n),this.currentSlide=n.currentSlide)}),this.deck.on("scrollmode-enter",t=>{const n=t;h.log("Scroll mode enter",n)}),this.deck.on("scrollmode-exit",t=>{const n=t;h.log("Scroll mode exit",n)})}static create(e,t){const n=new w(e,t);return n.initialize(),n}}const H=async(o,e,t)=>{h.initialize(t.debug,"demo-plugin");const n=o.getEnvironmentInfo();h.log("Environment:",n),await O(o,t),await w.create(e,t)};return()=>new R("demo-plugin",H,k).createInterface()}));
