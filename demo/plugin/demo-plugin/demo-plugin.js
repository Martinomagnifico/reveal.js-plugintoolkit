(function(u,h){typeof exports=="object"&&typeof module<"u"?module.exports=h():typeof define=="function"&&define.amd?define(h):(u=typeof globalThis<"u"?globalThis:u||self,u.RevealDemoPlugin=h())})(this,function(){"use strict";var Q=Object.defineProperty;var X=(u,h,S)=>h in u?Q(u,h,{enumerable:!0,configurable:!0,writable:!0,value:S}):u[h]=S;var d=(u,h,S)=>X(u,typeof h!="symbol"?h+"":h,S);var u=typeof document<"u"?document.currentScript:null;function h(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var S,M;function L(){if(M)return S;M=1;var n=function(l){return e(l)&&!t(l)};function e(r){return!!r&&typeof r=="object"}function t(r){var l=Object.prototype.toString.call(r);return l==="[object RegExp]"||l==="[object Date]"||c(r)}var o=typeof Symbol=="function"&&Symbol.for,i=o?Symbol.for("react.element"):60103;function c(r){return r.$$typeof===i}function a(r){return Array.isArray(r)?[]:{}}function f(r,l){return l.clone!==!1&&l.isMergeableObject(r)?v(a(r),r,l):r}function p(r,l,s){return r.concat(l).map(function(m){return f(m,s)})}function b(r,l){if(!l.customMerge)return v;var s=l.customMerge(r);return typeof s=="function"?s:v}function C(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(l){return Object.propertyIsEnumerable.call(r,l)}):[]}function E(r){return Object.keys(r).concat(C(r))}function j(r,l){try{return l in r}catch{return!1}}function G(r,l){return j(r,l)&&!(Object.hasOwnProperty.call(r,l)&&Object.propertyIsEnumerable.call(r,l))}function K(r,l,s){var m={};return s.isMergeableObject(r)&&E(r).forEach(function(g){m[g]=f(r[g],s)}),E(l).forEach(function(g){G(r,g)||(j(r,g)&&s.isMergeableObject(l[g])?m[g]=b(g,s)(r[g],l[g],s):m[g]=f(l[g],s))}),m}function v(r,l,s){s=s||{},s.arrayMerge=s.arrayMerge||p,s.isMergeableObject=s.isMergeableObject||n,s.cloneUnlessOtherwiseSpecified=f;var m=Array.isArray(l),g=Array.isArray(r),J=m===g;return J?m?s.arrayMerge(r,l,s):K(r,l,s):f(l,s)}v.all=function(l,s){if(!Array.isArray(l))throw new Error("first argument should be an array");return l.reduce(function(m,g){return v(m,g,s)},{})};var Y=v;return S=Y,S}var P=L();const D=h(P),R=()=>{const n=typeof window<"u",e=typeof document<"u",t=n&&typeof location<"u"&&/localhost|127\.0\.0\.1/.test(location.hostname);let o=!1;try{o=new Function('return typeof module !== "undefined" && !!module.hot')()}catch{}let i=!1;try{i=new Function('return typeof import.meta !== "undefined" && typeof import.meta.env !== "undefined" && import.meta.env.DEV === true')()}catch{}const c=n&&typeof navigator<"u"&&/vite|localhost|127\.0\.0\.1/.test(location.origin)&&/AppleWebKit|Chrome|Vite/.test(navigator.userAgent),a=e&&!!document.querySelector('script[type="module"]');let f=!1;try{f=new Function('return typeof process !== "undefined" && process.env && (process.env.ROLLUP_WATCH === "true" || process.env.NODE_ENV === "development")')()}catch{}let p=!1;try{p=new Function('return typeof define === "function" && !!define.amd')()}catch{}return{isDevServer:t,isWebpackHMR:o,isVite:i,isVitePreview:c,hasModuleScripts:a,isModuleBundler:f,isAMD:p,isBundlerEnvironment:o||i||c||a||f||p||t}};class x{constructor(e,t,o){d(this,"defaultConfig");d(this,"pluginInit");d(this,"pluginId");d(this,"mergedConfig",null);d(this,"userConfigData",null);d(this,"data",{});d(this,"getEnvironmentInfo",()=>R());typeof e=="string"?(this.pluginId=e,this.pluginInit=t,this.defaultConfig=o||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{})}initializeConfig(e){const t=this.defaultConfig,i=e.getConfig()[this.pluginId]||{};this.userConfigData=i,this.mergedConfig=D(t,i,{arrayMerge:(c,a)=>a,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}get userConfig(){return this.userConfigData||{}}init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:o=>this.init(o),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const U=n=>{const e=document.querySelector(`script[src$="${n}.js"], script[src$="${n}.min.js"], script[src$="${n}.mjs"]`);if(e!=null&&e.src){const t=e.getAttribute("src")||"",o=t.lastIndexOf("/");if(o!==-1)return t.substring(0,o+1)}try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:u&&u.tagName.toUpperCase()==="SCRIPT"&&u.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:u&&u.tagName.toUpperCase()==="SCRIPT"&&u.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href))return(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:u&&u.tagName.toUpperCase()==="SCRIPT"&&u.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:u&&u.tagName.toUpperCase()==="SCRIPT"&&u.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href).lastIndexOf("/")+1)}catch{}return`plugin/${n}/`},I="data-css-id",_=(n,e)=>new Promise((t,o)=>{const i=document.createElement("link");i.rel="stylesheet",i.href=e,i.setAttribute(I,n);const c=setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i),o(new Error(`[${n}] Timeout loading CSS from: ${e}`))},5e3);i.onload=()=>{clearTimeout(c),t()},i.onerror=()=>{clearTimeout(c),i.parentNode&&i.parentNode.removeChild(i),o(new Error(`[${n}] Failed to load CSS from: ${e}`))},document.head.appendChild(i)}),T=n=>document.querySelectorAll(`[${I}="${n}"]`).length>0,O=n=>new Promise(e=>{if(t())return e(!0);setTimeout(()=>{e(t())},50);function t(){if(T(n))return!0;try{return window.getComputedStyle(document.documentElement).getPropertyValue(`--cssimported-${n}`).trim()!==""}catch{return!1}}}),A=async n=>{const{id:e,cssautoload:t=!0,csspath:o="",debug:i=!1}=n;if(t===!1||o===!1)return;if(T(e)){i&&console.log(`[${e}] CSS already loaded, skipping`);return}const c=[];typeof o=="string"&&o.trim()!==""&&c.push(o);const a=U(e);if(a){const p=`${a}${e}.css`;c.push(p)}const f=`plugin/${e}/${e}.css`;c.push(f);for(const p of c)try{await _(e,p);let b="CSS";o&&p===o?b="user-specified CSS":a&&p===`${a}${e}.css`?b="CSS (auto-detected from script location)":b="CSS (standard fallback)",i&&console.log(`[${e}] ${b} loaded successfully from: ${p}`);return}catch{i&&console.log(`[${e}] Failed to load CSS from: ${p}`)}console.warn(`[${e}] Could not load CSS from any location`)};async function N(n,e){if("getEnvironmentInfo"in n&&e){const t=n,o=t.getEnvironmentInfo();if(await O(t.pluginId)){e.debug&&console.log(`[${t.pluginId}] CSS already imported, skipping`);return}if("cssautoload"in t.userConfig?!!e.cssautoload:!o.isBundlerEnvironment)return A({id:t.pluginId,cssautoload:!0,csspath:e.csspath,debug:e.debug});o.isBundlerEnvironment&&console.warn(`[${t.pluginId}] CSS autoloading is disabled in bundler environments. Please import the CSS manually, using import.`);return}return A(n)}class F{constructor(){d(this,"debugMode",!1);d(this,"label","DEBUG");d(this,"groupDepth",0);d(this,"group",(...e)=>{this.debugLog("group",...e),this.groupDepth++});d(this,"groupCollapsed",(...e)=>{this.debugLog("groupCollapsed",...e),this.groupDepth++});d(this,"groupEnd",()=>{this.groupDepth>0&&(this.groupDepth--,this.debugLog("groupEnd"))});d(this,"error",(...e)=>{const t=this.debugMode;this.debugMode=!0,this.formatAndLog(console.error,e),this.debugMode=t});d(this,"table",(e,t,o)=>{if(this.debugMode)try{typeof e=="string"&&t!==void 0&&typeof t!="string"?(this.groupDepth===0?console.log(`[${this.label}]: ${e}`):console.log(e),o?console.table(t,o):console.table(t)):(this.groupDepth===0&&console.log(`[${this.label}]: Table data`),typeof t=="object"&&Array.isArray(t)?console.table(e,t):console.table(e))}catch(i){console.error(`[${this.label}]: Error showing table:`,i),console.log(`[${this.label}]: Raw data:`,e)}});d(this,"formatAndLog",(e,t)=>{if(this.debugMode)try{this.groupDepth>0?e.call(console,...t):t.length>0&&typeof t[0]=="string"?e.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):e.call(console,`[${this.label}]:`,...t)}catch(o){console.error(`[${this.label}]: Error in logging:`,o),console.log(`[${this.label}]: Original log data:`,...t)}})}initialize(e,t="DEBUG"){this.debugMode=e,this.label=t}debugLog(e,...t){const o=console[e];if(!this.debugMode&&e!=="error"||typeof o!="function")return;const i=o;if(e==="group"||e==="groupCollapsed"){t.length>0&&typeof t[0]=="string"?i.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):i.call(console,`[${this.label}]:`,...t);return}if(e==="groupEnd"){i.call(console);return}if(e==="table"){t.length===1?this.table(t[0]):t.length===2?typeof t[0]=="string"?this.table(t[0],t[1]):this.table(t[0],t[1]):t.length>=3&&this.table(t[0],t[1],t[2]);return}this.groupDepth>0?i.call(console,...t):t.length>0&&typeof t[0]=="string"?i.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):i.call(console,`[${this.label}]:`,...t)}}const y=(n=>new Proxy(n,{get:(e,t)=>{if(t in e)return e[t];const o=t.toString();if(typeof console[o]=="function")return(...i)=>{e.debugLog(o,...i)}}}))(new F),z=n=>{let[e,t]=[0,0];n.on("slidechanged",o=>{const{indexh:i,indexv:c,previousSlide:a,currentSlide:f}=o;i!==e&&n.dispatchEvent({type:"slidechanged-h",data:{previousSlide:a,currentSlide:f,indexh:i,indexv:c}}),c!==t&&i===e&&n.dispatchEvent({type:"slidechanged-v",data:{previousSlide:a,currentSlide:f,indexh:i,indexv:c}}),[e,t]=[i,c]})},V=n=>{const e=n.getViewportElement();if(!e)return console.warn("[verticator]: Could not find viewport element"),()=>{};const t=()=>e.classList.contains("reveal-scroll");let o=t(),i=!0;const c=new MutationObserver(()=>{if(!i)return;const a=t();if(a!==o){const f=n.getCurrentSlide(),p=n.getIndices(),b=p.h,C=p.v,E=a?"scrollmode-enter":"scrollmode-exit";n.dispatchEvent({type:E,data:{currentSlide:f,previousSlide:null,indexh:b,indexv:C}}),o=a}});return c.observe(e,{attributes:!0,attributeFilter:["class"]}),()=>{i=!1,c.disconnect()}},w=n=>n instanceof HTMLElement&&n.tagName==="SECTION",q=n=>w(n)?Array.from(n.children).some(e=>e instanceof HTMLElement&&e.tagName==="SECTION"):!1,B=n=>w(n)?n.parentElement instanceof HTMLElement&&n.parentElement.tagName==="SECTION":!1,k=n=>w(n)?B(n)?"vertical":q(n)?"stack":"horizontal":"invalid",H={demoOption:"default value",cssautoload:!0,csspath:"",debug:!1};class ${constructor(e,t){d(this,"deck");d(this,"options");d(this,"currentSlide",null);this.deck=e,this.options=t,y.log("Demo plugin initialized with options:",t)}initialize(){y.log("Demo plugin initialized successfully");const e=document.createElement("div");e.className="demo-plugin-indicator",e.textContent="Demo Plugin Active",document.body.appendChild(e),y.log("Indicator element added"),z(this.deck),V(this.deck),this.deck.on("slidechanged-h",t=>{const o=t;if(o.currentSlide!==this.currentSlide){y.log("Moved horizontally",o);const i=k(o.currentSlide);y.log("Slide type:",i),this.currentSlide=o.currentSlide}}),this.deck.on("slidechanged-v",t=>{const o=t;o.currentSlide!==this.currentSlide&&(y.log("Moved vertically",o),this.currentSlide=o.currentSlide)}),this.deck.on("scrollmode-enter",t=>{const o=t;y.log("Scroll mode enter",o)}),this.deck.on("scrollmode-exit",t=>{const o=t;y.log("Scroll mode exit",o)})}static create(e,t){const o=new $(e,t);return o.initialize(),o}}const W=async(n,e,t)=>{y.initialize(t.debug,"demo-plugin");const o=n.getEnvironmentInfo();y.log("Environment:",o),await N(n,t),await $.create(e,t)};return()=>new x("demo-plugin",W,H).createInterface()});
