(function(s,f){typeof exports=="object"&&typeof module<"u"?module.exports=f():typeof define=="function"&&define.amd?define(f):(s=typeof globalThis<"u"?globalThis:s||self,s.RevealDemoPlugin=f())})(this,function(){"use strict";var B=Object.defineProperty;var G=(s,f,p)=>f in s?B(s,f,{enumerable:!0,configurable:!0,writable:!0,value:p}):s[f]=p;var u=(s,f,p)=>G(s,typeof f!="symbol"?f+"":f,p);var s=typeof document<"u"?document.currentScript:null;function f(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var p,j;function I(){if(j)return p;j=1;var l=function(o){return e(o)&&!t(o)};function e(n){return!!n&&typeof n=="object"}function t(n){var o=Object.prototype.toString.call(n);return o==="[object RegExp]"||o==="[object Date]"||g(n)}var i=typeof Symbol=="function"&&Symbol.for,r=i?Symbol.for("react.element"):60103;function g(n){return n.$$typeof===r}function b(n){return Array.isArray(n)?[]:{}}function m(n,o){return o.clone!==!1&&o.isMergeableObject(n)?C(b(n),n,o):n}function h(n,o,c){return n.concat(o).map(function(d){return m(d,c)})}function y(n,o){if(!o.customMerge)return C;var c=o.customMerge(n);return typeof c=="function"?c:C}function O(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(o){return Object.propertyIsEnumerable.call(n,o)}):[]}function M(n){return Object.keys(n).concat(O(n))}function E(n,o){try{return o in n}catch{return!1}}function z(n,o){return E(n,o)&&!(Object.hasOwnProperty.call(n,o)&&Object.propertyIsEnumerable.call(n,o))}function q(n,o,c){var d={};return c.isMergeableObject(n)&&M(n).forEach(function(a){d[a]=m(n[a],c)}),M(o).forEach(function(a){z(n,a)||(E(n,a)&&c.isMergeableObject(o[a])?d[a]=y(a,c)(n[a],o[a],c):d[a]=m(o[a],c))}),d}function C(n,o,c){c=c||{},c.arrayMerge=c.arrayMerge||h,c.isMergeableObject=c.isMergeableObject||l,c.cloneUnlessOtherwiseSpecified=m;var d=Array.isArray(o),a=Array.isArray(n),N=d===a;return N?d?c.arrayMerge(n,o,c):q(n,o,c):m(o,c)}C.all=function(o,c){if(!Array.isArray(o))throw new Error("first argument should be an array");return o.reduce(function(d,a){return C(d,a,c)},{})};var F=C;return p=F,p}var A=I();const T=f(A);class P{constructor(e,t,i){u(this,"defaultConfig");u(this,"pluginInit");u(this,"pluginId");u(this,"mergedConfig",null);u(this,"data",{});typeof e=="string"?(this.pluginId=e,this.pluginInit=t,this.defaultConfig=i||{}):(this.pluginId=e.id,this.pluginInit=e.init,this.defaultConfig=e.defaultConfig||{})}initializeConfig(e){const t=this.defaultConfig,r=e.getConfig()[this.pluginId]||{};this.mergedConfig=T(t,r,{arrayMerge:(g,b)=>b,clone:!0})}getCurrentConfig(){if(!this.mergedConfig)throw new Error("Plugin configuration has not been initialized");return this.mergedConfig}getData(){return Object.keys(this.data).length>0?this.data:void 0}init(e){if(this.initializeConfig(e),this.pluginInit)return this.pluginInit(this,e,this.getCurrentConfig())}createInterface(e={}){return{id:this.pluginId,init:i=>this.init(i),getConfig:()=>this.getCurrentConfig(),getData:()=>this.getData(),...e}}}const R=l=>{const e=document.querySelector(`script[src$="${l}.js"], script[src$="${l}.min.js"], script[src$="${l}.mjs"]`);if(e!=null&&e.src){const t=e.getAttribute("src")||"",i=t.lastIndexOf("/");if(i!==-1)return t.substring(0,i+1)}try{if(typeof{url:typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:s&&s.tagName.toUpperCase()==="SCRIPT"&&s.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href}<"u"&&(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:s&&s.tagName.toUpperCase()==="SCRIPT"&&s.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href))return(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:s&&s.tagName.toUpperCase()==="SCRIPT"&&s.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href).slice(0,(typeof document>"u"&&typeof location>"u"?require("url").pathToFileURL(__filename).href:typeof document>"u"?location.href:s&&s.tagName.toUpperCase()==="SCRIPT"&&s.src||new URL("demo-plugin/demo-plugin.js",document.baseURI).href).lastIndexOf("/")+1)}catch{}return`plugin/${l}/`},w="data-css-id",U=(l,e)=>new Promise((t,i)=>{const r=document.createElement("link");r.rel="stylesheet",r.href=e,r.setAttribute(w,l);const g=setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),i(new Error(`[${l}] Timeout loading CSS from: ${e}`))},5e3);r.onload=()=>{clearTimeout(g),t()},r.onerror=()=>{clearTimeout(g),r.parentNode&&r.parentNode.removeChild(r),i(new Error(`[${l}] Failed to load CSS from: ${e}`))},document.head.appendChild(r)}),L=l=>document.querySelectorAll(`[${w}="${l}"]`).length>0,v=async l=>{const{id:e,cssautoload:t=!0,csspath:i="",debug:r=!1}=l;if(t===!1||i===!1)return;if(L(e)){r&&console.log(`[${e}] CSS already loaded, skipping`);return}const g=[];typeof i=="string"&&i.trim()!==""&&g.push(i);const b=R(e);if(b){const h=`${b}${e}.css`;g.push(h)}const m=`plugin/${e}/${e}.css`;g.push(m);for(const h of g)try{await U(e,h);let y="CSS";i&&h===i?y="user-specified CSS":b&&h===`${b}${e}.css`?y="CSS (auto-detected from script location)":y="CSS (standard fallback)",r&&console.log(`[${e}] ${y} loaded successfully from: ${h}`);return}catch{r&&console.log(`[${e}] Failed to load CSS from: ${h}`)}console.warn(`[${e}] Could not load CSS from any location`)};class _{constructor(){u(this,"debugMode",!1);u(this,"label","DEBUG");u(this,"groupDepth",0);u(this,"group",(...e)=>{this.debugLog("group",...e),this.groupDepth++});u(this,"groupCollapsed",(...e)=>{this.debugLog("groupCollapsed",...e),this.groupDepth++});u(this,"groupEnd",()=>{this.groupDepth>0&&(this.groupDepth--,this.debugLog("groupEnd"))});u(this,"error",(...e)=>{const t=this.debugMode;this.debugMode=!0,this.formatAndLog(console.error,e),this.debugMode=t});u(this,"table",(e,t,i)=>{if(this.debugMode)try{typeof e=="string"&&t!==void 0&&typeof t!="string"?(this.groupDepth===0?console.log(`[${this.label}]: ${e}`):console.log(e),i?console.table(t,i):console.table(t)):(this.groupDepth===0&&console.log(`[${this.label}]: Table data`),typeof t=="object"&&Array.isArray(t)?console.table(e,t):console.table(e))}catch(r){console.error(`[${this.label}]: Error showing table:`,r),console.log(`[${this.label}]: Raw data:`,e)}});u(this,"formatAndLog",(e,t)=>{if(this.debugMode)try{this.groupDepth>0?e.call(console,...t):t.length>0&&typeof t[0]=="string"?e.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):e.call(console,`[${this.label}]:`,...t)}catch(i){console.error(`[${this.label}]: Error in logging:`,i),console.log(`[${this.label}]: Original log data:`,...t)}})}initialize(e,t="DEBUG"){this.debugMode=e,this.label=t}debugLog(e,...t){const i=console[e];if(!this.debugMode&&e!=="error"||typeof i!="function")return;const r=i;if(e==="group"||e==="groupCollapsed"){t.length>0&&typeof t[0]=="string"?r.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):r.call(console,`[${this.label}]:`,...t);return}if(e==="groupEnd"){r.call(console);return}if(e==="table"){t.length===1?this.table(t[0]):t.length===2?typeof t[0]=="string"?this.table(t[0],t[1]):this.table(t[0],t[1]):t.length>=3&&this.table(t[0],t[1],t[2]);return}this.groupDepth>0?r.call(console,...t):t.length>0&&typeof t[0]=="string"?r.call(console,`[${this.label}]: ${t[0]}`,...t.slice(1)):r.call(console,`[${this.label}]:`,...t)}}const S=(l=>new Proxy(l,{get:(e,t)=>{if(t in e)return e[t];const i=t.toString();if(typeof console[i]=="function")return(...r)=>{e.debugLog(i,...r)}}}))(new _),D={demoOption:"default value",cssautoload:!0,csspath:"",debug:!1};class ${constructor(e,t){u(this,"deck");u(this,"options");this.deck=e,this.options=t,S.log("Demo plugin initialized with options:",t)}initialize(){S.log("Demo plugin initialized successfully");const e=document.createElement("div");e.className="demo-plugin-indicator",e.textContent="Demo Plugin Active",document.body.appendChild(e),S.log("Indicator element added")}static create(e,t){const i=new $(e,t);return i.initialize(),i}}const x=async(l,e,t)=>{if(S.initialize(t.debug,"demo-plugin"),t.cssautoload)try{await v({id:l.pluginId,cssautoload:t.cssautoload,csspath:t.csspath,debug:t.debug})}catch(i){S.warn("CSS loading failed, but plugin will continue:",i)}await $.create(e,t)};return()=>new P("demo-plugin",x,D).createInterface()});
